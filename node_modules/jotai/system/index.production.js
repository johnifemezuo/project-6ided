System.register(["react"],function(O){"use strict";var U,$,C,q,F,V,R,H,J;return{setters:[function(E){U=E.createContext,$=E.useState,C=E.useEffect,q=E.useRef,F=E.createElement,V=E.useContext,R=E.useCallback,H=E.useReducer,J=E.useDebugValue}],execute:function(){O({atom:be,useAtom:me,useAtomValue:te,useSetAtom:re});const E=Symbol(),K=s=>!!s[E],le=s=>!s[E].c,_=s=>{var c,u;(u=(c=s[E]).c)==null||u.call(c)},A=(s,c)=>{const u=s[E].o,l=c[E].o;return u===l||s===l||K(u)&&A(u,c)},Q=s=>{const c={o:s,c:null},u=new Promise(l=>{c.c=()=>{c.c=null,l()},s.then(c.c,c.c)});return u[E]=c,u};var fe=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Y=(s,c,u)=>c in s?fe(s,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[c]=u,he=(s,c)=>{for(var u in c||(c={}))ve.call(c,u)&&Y(s,u,c[u]);if(X)for(var u of X(c))we.call(c,u)&&Y(s,u,c[u]);return s},Ee=(s,c)=>de(s,pe(c));const j=s=>"init"in s,T="r",z="w",I="c",W="s",Se="h",Z=s=>{const c=new WeakMap,u=new WeakMap,l=new Map;if(s)for(const[e,t]of s){const o={v:t,r:0,d:new Map};c.set(e,o)}const f=new WeakMap,v=(e,t,o)=>{let r=f.get(t);r||(r=new Map,f.set(t,r)),o.then(()=>{r.get(e)===o&&(r.delete(e),r.size||f.delete(t))}),r.set(e,o)},S=e=>{const t=new Set,o=f.get(e);return o&&(f.delete(e),o.forEach((r,i)=>{_(r),t.add(i)})),t},w=new WeakMap,g=e=>{let t=w.get(e);return t||(t=new Map,w.set(e,t)),t},p=(e,t)=>{if(e){const o=g(e);let r=o.get(t);return r||(r=p(e.p,t),r&&("p"in r&&r.p.then(()=>o.delete(t)),o.set(t,r))),r}return c.get(t)},h=(e,t,o)=>{if(e)g(e).set(t,o);else{const r=c.get(t);c.set(t,o),l.has(t)||l.set(t,r)}},m=(e,t=new Map,o)=>{if(!o)return t;const r=new Map;let i=!1;return o.forEach(n=>{var a;const d=((a=p(e,n))==null?void 0:a.r)||0;r.set(n,d),t.get(n)!==d&&(i=!0)}),t.size===r.size&&!i?t:r},ne=(e,t,o,r,i)=>{const n=p(e,t);if(n){if(i&&(!("p"in n)||!A(n.p,i)))return n;"p"in n&&_(n.p)}const a={v:o,r:(n==null?void 0:n.r)||0,d:m(e,n==null?void 0:n.d,r)};let d=!1;return!n||!("v"in n)||!Object.is(n.v,o)?(d=!0,++a.r,a.d.has(t)&&(a.d=new Map(a.d).set(t,a.r))):a.d!==n.d&&(a.d.size!==n.d.size||!Array.from(a.d.keys()).every(y=>n.d.has(y)))&&(d=!0,Promise.resolve().then(()=>{P(e)})),n&&!d?n:(h(e,t,a),a)},oe=(e,t,o,r,i)=>{const n=p(e,t);if(n){if(i&&(!("p"in n)||!A(n.p,i)))return n;"p"in n&&_(n.p)}const a={e:o,r:(n==null?void 0:n.r)||0,d:m(e,n==null?void 0:n.d,r)};return h(e,t,a),a},se=(e,t,o,r)=>{const i=p(e,t);if(i&&"p"in i){if(A(i.p,o))return i;_(i.p)}v(e,t,o);const n={p:o,r:(i==null?void 0:i.r)||0,d:m(e,i==null?void 0:i.d,r)};return h(e,t,n),n},k=(e,t,o,r)=>{if(o instanceof Promise){const i=Q(o.then(n=>{ne(e,t,n,r,i)}).catch(n=>{if(n instanceof Promise)return K(n)?n.then(()=>{M(e,t,!0)}):n;oe(e,t,n,r,i)}));return se(e,t,i,r)}return ne(e,t,o,r)},ye=(e,t)=>{const o=p(e,t);if(o){const r=Ee(he({},o),{i:o.r});h(e,t,r)}},M=(e,t,o)=>{if(!o){const i=p(e,t);if(i&&(i.r!==i.i&&"p"in i&&!le(i.p)||(i.d.forEach((n,a)=>{if(a!==t)if(!u.has(a))M(e,a);else{const d=p(e,a);d&&d.r===d.i&&M(e,a)}}),Array.from(i.d).every(([n,a])=>{const d=p(e,n);return d&&"v"in d&&d.r===a}))))return i}const r=new Set;try{const i=t.read(n=>{r.add(n);const a=n===t?p(e,n):M(e,n);if(a){if("e"in a)throw a.e;if("p"in a)throw a.p;return a.v}if(j(n))return n.init;throw new Error("no atom init")});return k(e,t,i,r)}catch(i){if(i instanceof Promise){const n=Q(i);return se(e,t,n,r)}return oe(e,t,i,r)}},Me=(e,t)=>M(t,e),Pe=e=>{let t=u.get(e);return t||(t=B(e)),t},D=(e,t)=>!t.l.size&&(!t.t.size||t.t.size===1&&t.t.has(e)),Oe=e=>{const t=u.get(e);t&&D(e,t)&&G(e)},L=(e,t)=>{const o=u.get(t);o==null||o.t.forEach(r=>{r!==t&&(ye(e,r),L(e,r))})},ie=(e,t,o)=>{let r=!0;const i=(d,y)=>{const b=M(e,d);if("e"in b)throw b.e;if("p"in b){if(y!=null&&y.unstable_promise)return b.p.then(()=>i(d,y));throw b.p}if("v"in b)return b.v;throw new Error("no value found")},n=(d,y)=>{let b;if(d===t){if(!j(d))throw new Error("atom not writable");S(d).forEach(ae=>{ae!==e&&k(ae,d,y)});const ke=p(e,d),Ve=k(e,d,y);ke!==Ve&&L(e,d)}else b=ie(e,d,y);return r||P(e),b},a=t.write(i,n,o);return r=!1,e=void 0,a},ce=(e,t,o)=>{const r=ie(o,e,t);return P(o),r},Ce=e=>!!e.write,B=(e,t)=>{const o={t:new Set(t&&[t]),l:new Set};if(u.set(e,o),M(void 0,e).d.forEach((r,i)=>{const n=u.get(i);n?n.t.add(e):i!==e&&B(i,e)}),Ce(e)&&e.onMount){const r=n=>ce(e,n),i=e.onMount(r);i&&(o.u=i)}return o},G=e=>{var t;const o=(t=u.get(e))==null?void 0:t.u;o&&o(),u.delete(e);const r=p(void 0,e);r&&r.d.forEach((i,n)=>{if(n!==e){const a=u.get(n);a&&(a.t.delete(e),D(n,a)&&G(n))}})},ue=(e,t,o)=>{const r=new Set(t.d.keys());o==null||o.forEach((i,n)=>{if(r.has(n)){r.delete(n);return}const a=u.get(n);a&&(a.t.delete(e),D(n,a)&&G(n))}),r.forEach(i=>{const n=u.get(i);n?n.t.add(e):u.has(e)&&B(i,e)})},P=e=>{if(e){g(e).forEach((t,o)=>{if(t!==c.get(o)){const r=u.get(o);r==null||r.l.forEach(i=>i(e))}});return}for(;l.size;){const t=Array.from(l);l.clear(),t.forEach(([o,r])=>{const i=p(void 0,o);i&&i.d!==(r==null?void 0:r.d)&&ue(o,i,r==null?void 0:r.d);const n=u.get(o);n==null||n.l.forEach(a=>a())})}},Re=e=>{g(e).forEach((t,o)=>{const r=c.get(o);(t.r>((r==null?void 0:r.r)||0)||"v"in t&&t.r===(r==null?void 0:r.r)&&t.d!==(r==null?void 0:r.d))&&(c.set(o,t),t.d!==(r==null?void 0:r.d)&&ue(o,t,r==null?void 0:r.d))})},_e=(e,t)=>{t&&Re(t),P(void 0)},Ae=(e,t)=>{const o=Pe(e).l;return o.add(t),()=>{o.delete(t),Oe(e)}},Te=(e,t)=>{for(const[o,r]of e)j(o)&&(k(t,o,r),L(t,o));P(t)};return{[T]:Me,[z]:ce,[I]:_e,[W]:Ae,[Se]:Te}},je=O("unstable_createStore",s=>{const c=Z(s),u=f=>{const v=c[T](f);if("e"in v)throw v.e;if(!("p"in v))return v.v},l=f=>new Promise((v,S)=>{const w=c[T](f);"e"in w?S(w.e):"p"in w?v(w.p.then(()=>l(f))):v(w.v)});return{get:u,asyncGet:l,set:(f,v)=>c[z](f,v),sub:(f,v)=>c[W](f,v),SECRET_INTERNAL_store:c}}),ee=(s,c)=>({s:c?c(s).SECRET_INTERNAL_store:Z(s)}),x=new Map,N=O("SECRET_INTERNAL_getScopeContext",s=>(x.has(s)||x.set(s,U(ee())),x.get(s))),ze=O("Provider",({children:s,initialValues:c,scope:u,unstable_createStore:l,unstable_enableVersionedWrite:f})=>{const[v,S]=$();C(()=>{v&&(w.current.s[I](null,v),delete v.p)},[v]);const w=q();w.current||(w.current=ee(c,l),f&&(w.current.w=p=>{S(h=>{const m=h?{p:h}:{};return p(m),m})}));const g=N(u);return F(g.Provider,{value:w.current},s)});let ge=0;function be(s,c){const u=`atom${++ge}`,l={toString:()=>u};return typeof s=="function"?l.read=s:(l.init=s,l.read=f=>f(l),l.write=(f,v,S)=>v(l,typeof S=="function"?S(f(l)):S)),c&&(l.write=c),l}function te(s,c){const u=N(c),{s:l}=V(u),f=R(p=>{const h=l[T](s,p);if("e"in h)throw h.e;if("p"in h)throw h.p;if("v"in h)return h.v;throw new Error("no atom value")},[l,s]),[[v,S,w],g]=H(R((p,h)=>{const m=f(h);return Object.is(p[1],m)&&p[2]===s?p:[h,m,s]},[f,s]),void 0,()=>{const p=f(void 0);return[void 0,p,s]});return w!==s&&g(void 0),C(()=>{const p=l[W](s,g);return g(void 0),p},[l,s]),C(()=>{l[I](s,v)}),J(S),S}function re(s,c){const u=N(c),{s:l,w:f}=V(u);return R(v=>{const S=w=>l[z](s,v,w);return f?f(S):S()},[l,f,s])}function me(s,c){return"scope"in s&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),c=s.scope),[te(s,c),re(s,c)]}}}});
